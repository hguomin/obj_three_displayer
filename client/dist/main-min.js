function hemisphereLight(){var a=new THREE.HemisphereLight(16777215,16777215,.6);return a.color.setHSL(.6,.75,.5),a.groundColor.setHSL(.095,.5,.5),a.position.set(0,500,0),a}function init(){container=document.createElement("div"),document.getElementById("threeRenderer").appendChild(container),camera=new THREE.PerspectiveCamera(45,window.innerWidth/window.innerHeight,1,2e3),camera.position.z=70,camera.position.y=30,camera.position.x=60,scene=new THREE.Scene,scene.add(hemisphereLight());var a=new THREE.DirectionalLight(16777215,1);a.position.set(-1,8000.75,1e4),scene.add(a);var b=new THREE.DirectionalLight(16777215);b.position.set(-1,-1,-100),scene.add(b);var c=function(a){if(a.lengthComputable){var b=a.loaded/a.total*100;console.log(Math.round(b,2)+"% downloaded")}},d=function(a){alert("sorry failed to load")},e=new THREE.OBJMTLLoader;e.load("obj/boots_color_triangles.obj","obj/boots_color_triangles.mtl",function(a){a.position.y=-15,scene.add(a)},c,d),renderer=Detector.webgl?new THREE.WebGLRenderer:new THREE.CanvasRenderer,renderer.setPixelRatio(window.devicePixelRatio),renderer.setSize(window.innerWidth/2,window.innerHeight/2),container.appendChild(renderer.domElement),controls=new THREE.TrackballControls(camera,renderer.domElement),controls.rotateSpeed=5,controls.zoomSpeed=4,controls.panSpeed=.4,controls.noZoom=!1,controls.noPan=!1,controls.staticMoving=!0,controls.dynamicDampingFactor=.3,controls.addEventListener("change",render),window.addEventListener("resize",onWindowResize,!1)}function onWindowResize(){camera.aspect=window.innerWidth/window.innerHeight,camera.updateProjectionMatrix(),renderer.setSize(window.innerWidth/2,window.innerHeight/2),controls.handleResize()}function animate(){requestAnimationFrame(animate),controls.update(),render()}function render(){renderer.render(scene,camera)}var Detector={canvas:!!window.CanvasRenderingContext2D,webgl:function(){try{var a=document.createElement("canvas");return!(!window.WebGLRenderingContext||!a.getContext("webgl")&&!a.getContext("experimental-webgl"))}catch(b){return!1}}(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,getWebGLErrorMessage:function(){var a=document.createElement("div");return a.id="webgl-error-message",a.style.fontFamily="monospace",a.style.fontSize="13px",a.style.fontWeight="normal",a.style.textAlign="center",a.style.background="#fff",a.style.color="#000",a.style.padding="1.5em",a.style.width="400px",a.style.margin="5em auto 0",this.webgl||(a.innerHTML=window.WebGLRenderingContext?['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br />','Find out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.'].join("\n"):['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br/>','Find out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.'].join("\n")),a},addGetWebGLMessage:function(a){var b,c,d;a=a||{},b=void 0!==a.parent?a.parent:document.body,c=void 0!==a.id?a.id:"oldie",d=Detector.getWebGLErrorMessage(),d.id=c,b.appendChild(d)}};"object"==typeof module&&(module.exports=Detector),THREE.MTLLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager},THREE.MTLLoader.prototype={constructor:THREE.MTLLoader,load:function(a,b,c,d){var e=this,f=new THREE.XHRLoader(this.manager);f.setCrossOrigin(this.crossOrigin),f.load(a,function(a){b(e.parse(a))},c,d)},setBaseUrl:function(a){this.baseUrl=a},setCrossOrigin:function(a){this.crossOrigin=a},setMaterialOptions:function(a){this.materialOptions=a},parse:function(a){for(var b=a.split("\n"),c={},d=/\s+/,e={},f=0;f<b.length;f++){var g=b[f];if(g=g.trim(),0!==g.length&&"#"!==g.charAt(0)){var h=g.indexOf(" "),i=h>=0?g.substring(0,h):g;i=i.toLowerCase();var j=h>=0?g.substring(h+1):"";if(j=j.trim(),"newmtl"===i)c={name:j},e[j]=c;else if(c)if("ka"===i||"kd"===i||"ks"===i){var k=j.split(d,3);c[i]=[parseFloat(k[0]),parseFloat(k[1]),parseFloat(k[2])]}else c[i]=j}}var l=new THREE.MTLLoader.MaterialCreator(this.baseUrl,this.materialOptions);return l.setCrossOrigin(this.crossOrigin),l.setManager(this.manager),l.setMaterials(e),l}},THREE.MTLLoader.MaterialCreator=function(a,b){this.baseUrl=a,this.options=b,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.side=this.options&&this.options.side?this.options.side:THREE.FrontSide,this.wrap=this.options&&this.options.wrap?this.options.wrap:THREE.RepeatWrapping},THREE.MTLLoader.MaterialCreator.prototype={constructor:THREE.MTLLoader.MaterialCreator,setCrossOrigin:function(a){this.crossOrigin=a},setManager:function(a){this.manager=a},setMaterials:function(a){this.materialsInfo=this.convert(a),this.materials={},this.materialsArray=[],this.nameLookup={}},convert:function(a){if(!this.options)return a;var b={};for(var c in a){var d=a[c],e={};b[c]=e;for(var f in d){var g=!0,h=d[f],i=f.toLowerCase();switch(i){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(h=[h[0]/255,h[1]/255,h[2]/255]),this.options&&this.options.ignoreZeroRGBs&&0===h[0]&&0===h[1]&&0===h[1]&&(g=!1);break;case"d":this.options&&this.options.invertTransparency&&(h=1-h)}g&&(e[i]=h)}}return b},preload:function(){for(var a in this.materialsInfo)this.create(a)},getIndex:function(a){return this.nameLookup[a]},getAsArray:function(){var a=0;for(var b in this.materialsInfo)this.materialsArray[a]=this.create(b),this.nameLookup[b]=a,a++;return this.materialsArray},create:function(a){return void 0===this.materials[a]&&this.createMaterial_(a),this.materials[a]},createMaterial_:function(a){var b=this.materialsInfo[a],c={name:a,side:this.side};for(var d in b){var e=b[d];switch(d.toLowerCase()){case"kd":c.color=(new THREE.Color).fromArray(e);break;case"ka":break;case"ks":c.specular=(new THREE.Color).fromArray(e);break;case"map_kd":c.map=this.loadTexture(this.baseUrl+e),c.map.wrapS=this.wrap,c.map.wrapT=this.wrap;break;case"ns":c.shininess=parseFloat(e);break;case"d":1>e&&(c.transparent=!0,c.opacity=e);break;case"map_bump":case"bump":if(c.bumpMap)break;c.bumpMap=this.loadTexture(this.baseUrl+e),c.bumpMap.wrapS=this.wrap,c.bumpMap.wrapT=this.wrap}}return this.materials[a]=new THREE.MeshPhongMaterial(c),this.materials[a]},loadTexture:function(a,b,c,d,e){var f,g=THREE.Loader.Handlers.get(a),h=void 0!==this.manager?this.manager:THREE.DefaultLoadingManager;return null!==g?f=g.load(a,c):(f=new THREE.Texture,g=new THREE.ImageLoader(h),g.setCrossOrigin(this.crossOrigin),g.load(a,function(a){f.image=THREE.MTLLoader.ensurePowerOfTwo_(a),f.needsUpdate=!0,c&&c(f)},d,e)),void 0!==b&&(f.mapping=b),f}},THREE.MTLLoader.ensurePowerOfTwo_=function(a){if(!THREE.Math.isPowerOfTwo(a.width)||!THREE.Math.isPowerOfTwo(a.height)){var b=document.createElement("canvas");b.width=THREE.MTLLoader.nextHighestPowerOfTwo_(a.width),b.height=THREE.MTLLoader.nextHighestPowerOfTwo_(a.height);var c=b.getContext("2d");return c.drawImage(a,0,0,a.width,a.height,0,0,b.width,b.height),b}return a},THREE.MTLLoader.nextHighestPowerOfTwo_=function(a){--a;for(var b=1;32>b;b<<=1)a|=a>>b;return a+1},THREE.EventDispatcher.prototype.apply(THREE.MTLLoader.prototype),THREE.OBJMTLLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager},THREE.OBJMTLLoader.prototype={constructor:THREE.OBJMTLLoader,load:function(a,b,c,d,e){var f=this,g=new THREE.MTLLoader(this.manager);g.setBaseUrl(a.substr(0,a.lastIndexOf("/")+1)),g.setCrossOrigin(this.crossOrigin),g.load(b,function(b){var g=b;g.preload();var h=new THREE.XHRLoader(f.manager);h.setCrossOrigin(f.crossOrigin),h.load(a,function(a){var b=f.parse(a);b.traverse(function(a){if(a instanceof THREE.Mesh&&a.material.name){var b=g.create(a.material.name);b&&(a.material=b)}}),c(b)},d,e)},d,e)},setCrossOrigin:function(a){this.crossOrigin=a},parse:function(a,b){function c(a,b,c){return new THREE.Vector3(a,b,c)}function d(a,b){return new THREE.Vector2(a,b)}function e(a,b,c,d){return new THREE.Face3(a,b,c,d)}function g(a,b){m.length>0&&(j.vertices=m,j.mergeVertices(),j.computeFaceNormals(),j.computeBoundingSphere(),i.add(l),j=new THREE.Geometry,l=new THREE.Mesh(j,k)),void 0!==a&&(l.name=a),void 0!==b&&(k=new THREE.MeshLambertMaterial,k.name=b,l.material=k)}function p(a,b,c,d){void 0===d?j.faces.push(e(parseInt(a)-(f+1),parseInt(b)-(f+1),parseInt(c)-(f+1))):j.faces.push(e(parseInt(a)-(f+1),parseInt(b)-(f+1),parseInt(c)-(f+1),[n[parseInt(d[0])-1].clone(),n[parseInt(d[1])-1].clone(),n[parseInt(d[2])-1].clone()]))}function q(a,b,c){j.faceVertexUvs[0].push([o[parseInt(a)-1].clone(),o[parseInt(b)-1].clone(),o[parseInt(c)-1].clone()])}function r(a,b,c){void 0===a[3]?(p(a[0],a[1],a[2],c),void 0!==b&&b.length>0&&q(b[0],b[1],b[2])):(void 0!==c&&c.length>0?(p(a[0],a[1],a[3],[c[0],c[1],c[3]]),p(a[1],a[2],a[3],[c[1],c[2],c[3]])):(p(a[0],a[1],a[3]),p(a[1],a[2],a[3])),void 0!==b&&b.length>0&&(q(b[0],b[1],b[3]),q(b[1],b[2],b[3])))}for(var f=0,h=new THREE.Group,i=h,j=new THREE.Geometry,k=new THREE.MeshLambertMaterial,l=new THREE.Mesh(j,k),m=[],n=[],o=[],s=/v( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/,t=/vn( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/,u=/vt( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/,v=/f( +\d+)( +\d+)( +\d+)( +\d+)?/,w=/f( +(\d+)\/(\d+))( +(\d+)\/(\d+))( +(\d+)\/(\d+))( +(\d+)\/(\d+))?/,x=/f( +(\d+)\/(\d+)\/(\d+))( +(\d+)\/(\d+)\/(\d+))( +(\d+)\/(\d+)\/(\d+))( +(\d+)\/(\d+)\/(\d+))?/,y=/f( +(\d+)\/\/(\d+))( +(\d+)\/\/(\d+))( +(\d+)\/\/(\d+))( +(\d+)\/\/(\d+))?/,z=a.split("\n"),A=0;A<z.length;A++){var B=z[A];B=B.trim();var C;if(0!==B.length&&"#"!==B.charAt(0))if(null!==(C=s.exec(B)))m.push(c(parseFloat(C[1]),parseFloat(C[2]),parseFloat(C[3])));else if(null!==(C=t.exec(B)))n.push(c(parseFloat(C[1]),parseFloat(C[2]),parseFloat(C[3])));else if(null!==(C=u.exec(B)))o.push(d(parseFloat(C[1]),parseFloat(C[2])));else if(null!==(C=v.exec(B)))r([C[1],C[2],C[3],C[4]]);else if(null!==(C=w.exec(B)))r([C[2],C[5],C[8],C[11]],[C[3],C[6],C[9],C[12]]);else if(null!==(C=x.exec(B)))r([C[2],C[6],C[10],C[14]],[C[3],C[7],C[11],C[15]],[C[4],C[8],C[12],C[16]]);else if(null!==(C=y.exec(B)))r([C[2],C[5],C[8],C[11]],[],[C[3],C[6],C[9],C[12]]);else if(/^o /.test(B))g(),f+=m.length,m=[],i=new THREE.Object3D,i.name=B.substring(2).trim(),h.add(i);else if(/^g /.test(B))g(B.substring(2).trim(),void 0);else if(/^usemtl /.test(B))g(void 0,B.substring(7).trim());else if(/^mtllib /.test(B)){if(b){var D=B.substring(7);D=D.trim(),b(D)}}else/^s /.test(B)||console.log("THREE.OBJMTLLoader: Unhandled line "+B)}return g(void 0,void 0),h}},THREE.EventDispatcher.prototype.apply(THREE.OBJMTLLoader.prototype),THREE.TrackballControls=function(a,b){function y(a){c.enabled!==!1&&(window.removeEventListener("keydown",y),h=g,g===d.NONE&&(a.keyCode!==c.keys[d.ROTATE]||c.noRotate?a.keyCode!==c.keys[d.ZOOM]||c.noZoom?a.keyCode!==c.keys[d.PAN]||c.noPan||(g=d.PAN):g=d.ZOOM:g=d.ROTATE))}function z(a){c.enabled!==!1&&(g=h,window.addEventListener("keydown",y,!1))}function A(a){c.enabled!==!1&&(a.preventDefault(),a.stopPropagation(),g===d.NONE&&(g=a.button),g!==d.ROTATE||c.noRotate?g!==d.ZOOM||c.noZoom?g!==d.PAN||c.noPan||(r.copy(w(a.pageX,a.pageY)),s.copy(r)):(n.copy(w(a.pageX,a.pageY)),o.copy(n)):(k.copy(x(a.pageX,a.pageY)),j.copy(k)),document.addEventListener("mousemove",B,!1),document.addEventListener("mouseup",C,!1),c.dispatchEvent(u))}function B(a){c.enabled!==!1&&(a.preventDefault(),a.stopPropagation(),g!==d.ROTATE||c.noRotate?g!==d.ZOOM||c.noZoom?g!==d.PAN||c.noPan||s.copy(w(a.pageX,a.pageY)):o.copy(w(a.pageX,a.pageY)):(j.copy(k),k.copy(x(a.pageX,a.pageY))))}function C(a){c.enabled!==!1&&(a.preventDefault(),a.stopPropagation(),g=d.NONE,document.removeEventListener("mousemove",B),document.removeEventListener("mouseup",C),c.dispatchEvent(v))}function D(a){if(c.enabled!==!1){a.preventDefault(),a.stopPropagation();var b=0;a.wheelDelta?b=a.wheelDelta/40:a.detail&&(b=-a.detail/3),n.y+=.01*b,c.dispatchEvent(u),c.dispatchEvent(v)}}function E(a){if(c.enabled!==!1){switch(a.touches.length){case 1:g=d.TOUCH_ROTATE,k.copy(x(a.touches[0].pageX,a.touches[0].pageY)),j.copy(k);break;case 2:g=d.TOUCH_ZOOM_PAN;var b=a.touches[0].pageX-a.touches[1].pageX,e=a.touches[0].pageY-a.touches[1].pageY;q=p=Math.sqrt(b*b+e*e);var f=(a.touches[0].pageX+a.touches[1].pageX)/2,h=(a.touches[0].pageY+a.touches[1].pageY)/2;r.copy(w(f,h)),s.copy(r);break;default:g=d.NONE}c.dispatchEvent(u)}}function F(a){if(c.enabled!==!1)switch(a.preventDefault(),a.stopPropagation(),a.touches.length){case 1:j.copy(k),k.copy(x(a.touches[0].pageX,a.touches[0].pageY));break;case 2:var b=a.touches[0].pageX-a.touches[1].pageX,e=a.touches[0].pageY-a.touches[1].pageY;q=Math.sqrt(b*b+e*e);var f=(a.touches[0].pageX+a.touches[1].pageX)/2,h=(a.touches[0].pageY+a.touches[1].pageY)/2;s.copy(w(f,h));break;default:g=d.NONE}}function G(a){if(c.enabled!==!1){switch(a.touches.length){case 1:j.copy(k),k.copy(x(a.touches[0].pageX,a.touches[0].pageY));break;case 2:p=q=0;var b=(a.touches[0].pageX+a.touches[1].pageX)/2,e=(a.touches[0].pageY+a.touches[1].pageY)/2;s.copy(w(b,e)),r.copy(s)}g=d.NONE,c.dispatchEvent(v)}}function H(a){a.preventDefault()}var c=this,d={NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4};this.object=a,this.domElement=void 0!==b?b:document,this.enabled=!0,this.screen={left:0,top:0,width:0,height:0},this.rotateSpeed=1,this.zoomSpeed=1.2,this.panSpeed=.3,this.noRotate=!1,this.noZoom=!1,this.noPan=!1,this.staticMoving=!1,this.dynamicDampingFactor=.2,this.minDistance=0,this.maxDistance=1/0,this.keys=[65,83,68],this.target=new THREE.Vector3;var e=1e-6,f=new THREE.Vector3,g=d.NONE,h=d.NONE,i=new THREE.Vector3,j=new THREE.Vector2,k=new THREE.Vector2,l=new THREE.Vector3,m=0,n=new THREE.Vector2,o=new THREE.Vector2,p=0,q=0,r=new THREE.Vector2,s=new THREE.Vector2;this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.up0=this.object.up.clone();var t={type:"change"},u={type:"start"},v={type:"end"};this.handleResize=function(){if(this.domElement===document)this.screen.left=0,this.screen.top=0,this.screen.width=window.innerWidth,this.screen.height=window.innerHeight;else{var a=this.domElement.getBoundingClientRect(),b=this.domElement.ownerDocument.documentElement;this.screen.left=a.left+window.pageXOffset-b.clientLeft,this.screen.top=a.top+window.pageYOffset-b.clientTop,this.screen.width=a.width,this.screen.height=a.height}},this.handleEvent=function(a){"function"==typeof this[a.type]&&this[a.type](a)};var w=function(){var a=new THREE.Vector2;return function(b,d){return a.set((b-c.screen.left)/c.screen.width,(d-c.screen.top)/c.screen.height),a}}(),x=function(){var a=new THREE.Vector2;return function(b,d){return a.set((b-.5*c.screen.width-c.screen.left)/(.5*c.screen.width),(c.screen.height+2*(c.screen.top-d))/c.screen.width),a}}();this.rotateCamera=function(){var h,a=new THREE.Vector3,b=new THREE.Quaternion,d=new THREE.Vector3,e=new THREE.Vector3,f=new THREE.Vector3,g=new THREE.Vector3;return function(){g.set(k.x-j.x,k.y-j.y,0),h=g.length(),h?(i.copy(c.object.position).sub(c.target),d.copy(i).normalize(),e.copy(c.object.up).normalize(),f.crossVectors(e,d).normalize(),e.setLength(k.y-j.y),f.setLength(k.x-j.x),g.copy(e.add(f)),a.crossVectors(g,i).normalize(),h*=c.rotateSpeed,b.setFromAxisAngle(a,h),i.applyQuaternion(b),c.object.up.applyQuaternion(b),l.copy(a),m=h):!c.staticMoving&&m&&(m*=Math.sqrt(1-c.dynamicDampingFactor),i.copy(c.object.position).sub(c.target),b.setFromAxisAngle(l,m),i.applyQuaternion(b),c.object.up.applyQuaternion(b)),j.copy(k)}}(),this.zoomCamera=function(){var a;g===d.TOUCH_ZOOM_PAN?(a=p/q,p=q,i.multiplyScalar(a)):(a=1+(o.y-n.y)*c.zoomSpeed,1!==a&&a>0&&(i.multiplyScalar(a),c.staticMoving?n.copy(o):n.y+=(o.y-n.y)*this.dynamicDampingFactor))},this.panCamera=function(){var a=new THREE.Vector2,b=new THREE.Vector3,d=new THREE.Vector3;return function(){a.copy(s).sub(r),a.lengthSq()&&(a.multiplyScalar(i.length()*c.panSpeed),d.copy(i).cross(c.object.up).setLength(a.x),d.add(b.copy(c.object.up).setLength(a.y)),c.object.position.add(d),c.target.add(d),c.staticMoving?r.copy(s):r.add(a.subVectors(s,r).multiplyScalar(c.dynamicDampingFactor)))}}(),this.checkDistances=function(){c.noZoom&&c.noPan||(i.lengthSq()>c.maxDistance*c.maxDistance&&(c.object.position.addVectors(c.target,i.setLength(c.maxDistance)),n.copy(o)),i.lengthSq()<c.minDistance*c.minDistance&&(c.object.position.addVectors(c.target,i.setLength(c.minDistance)),n.copy(o)))},this.update=function(){i.subVectors(c.object.position,c.target),c.noRotate||c.rotateCamera(),c.noZoom||c.zoomCamera(),c.noPan||c.panCamera(),c.object.position.addVectors(c.target,i),c.checkDistances(),c.object.lookAt(c.target),f.distanceToSquared(c.object.position)>e&&(c.dispatchEvent(t),f.copy(c.object.position))},this.reset=function(){g=d.NONE,h=d.NONE,c.target.copy(c.target0),c.object.position.copy(c.position0),c.object.up.copy(c.up0),i.subVectors(c.object.position,c.target),c.object.lookAt(c.target),c.dispatchEvent(t),f.copy(c.object.position)},this.dispose=function(){this.domElement.removeEventListener("contextmenu",H,!1),this.domElement.removeEventListener("mousedown",A,!1),this.domElement.removeEventListener("mousewheel",D,!1),this.domElement.removeEventListener("MozMousePixelScroll",D,!1),this.domElement.removeEventListener("touchstart",E,!1),this.domElement.removeEventListener("touchend",G,!1),this.domElement.removeEventListener("touchmove",F,!1),document.removeEventListener("mousemove",B,!1),document.removeEventListener("mouseup",C,!1),window.removeEventListener("keydown",y,!1),window.removeEventListener("keyup",z,!1)},this.domElement.addEventListener("contextmenu",H,!1),this.domElement.addEventListener("mousedown",A,!1),this.domElement.addEventListener("mousewheel",D,!1),this.domElement.addEventListener("MozMousePixelScroll",D,!1),this.domElement.addEventListener("touchstart",E,!1),this.domElement.addEventListener("touchend",G,!1),this.domElement.addEventListener("touchmove",F,!1),window.addEventListener("keydown",y,!1),window.addEventListener("keyup",z,!1),this.handleResize(),this.update()},THREE.TrackballControls.prototype=Object.create(THREE.EventDispatcher.prototype),THREE.TrackballControls.prototype.constructor=THREE.TrackballControls;var container,camera,scene,renderer;init(),animate();